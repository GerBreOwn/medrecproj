CREATE or replace
    /*[ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]
    [DEFINER = { user | CURRENT_USER }]
    [SQL SECURITY { DEFINER | INVOKER }]*/
    VIEW `medrec`.`a3` 
    AS
SELECT
    `visit_visit`.`visit_date`
    , `visit_visit`.`patient_id`
    , `patient_patient`.`first_name`
    , `visit_dose`.`dose_name`
    , `patient_patient`.`last_name`
    , `patient_patient`.`middle_initial`
    , timestampdiff(year,`patient_patient`.`date_of_birth`, curdate()) as age
    , `patient_patient`.`gender`
FROM
    `medrec`.`visit_prescription`
    INNER JOIN `medrec`.`visit_visit` 
        ON (`visit_prescription`.`visit_id` = `visit_visit`.`id`)
    INNER JOIN `medrec`.`patient_patient` 
        ON (`visit_visit`.`patient_id` = `patient_patient`.`id`)
    INNER JOIN `medrec`.`visit_dose` 
        ON (`visit_prescription`.`medicine_dose_id` = `visit_dose`.`id`)
    INNER JOIN `medrec`.`visit_reminder` 
        ON (`visit_prescription`.`medicine_reminder_id` = `visit_reminder`.`id`)
    INNER JOIN `medrec`.`visit_medicine` 
        ON (`visit_prescription`.`medicine_id` = `visit_medicine`.`id`)
WHERE (`visit_visit`.`visit_date` = CURDATE()
    AND `visit_visit`.`patient_id` = 2);
